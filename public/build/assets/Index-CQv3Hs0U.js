import{A as M}from"./AuthenticatedLayout-BwqdLtow.js";import{G as u}from"./@inertiajs-BHNbm3Fi.js";import{d as R}from"./lodash.debounce-D6Lq3Ox3.js";import{B as N,Q as j,R as H,S as U,P as F}from"./@element-plus-7OHurGuN.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as x,a as m}from"./element-plus-LrVxQH71.js";import{e as G,w as I,ag as Q,ai as a,ar as W,c as h,U as e,M as t,T as q,o as b,a as i,O as J,Q as K,S,R as X}from"./@vue-DjPJmJBm.js";import"./darkmode-BEaTfPzm.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-D133QDgo.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const Y={props:["posts","page","pageSize"],components:{AuthenticatedLayout:M,Plus:N,Edit:j,Refresh:H,Filter:U,Delete:F},setup(l){const n=G({isLoading:!1,pageList:[10,20,60,80,100],param:{page:l.page,page_size:10,search:""}}),_=s=>{n.param.page_size=s,d()},c=s=>{n.param.page=s,d()},C=s=>{x.confirm("Are you sure want to change status of this item?","Confirmation",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{u.patch(route("admin.posts.change-status",s.id),{},{preserveState:!0,onSuccess:r=>{m.success(r.props.flash.success)},onError:r=>{m.error(r.props.flash.error)}})}).catch(()=>{u.reload(),m({type:"info",message:"Cancel"})})},y=s=>{x.confirm("Are you sure you want to delete?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{u.delete(route("admin.posts.destroy",s),{onSuccess:r=>{m.success(r.props.flash.success)},onError:r=>{m.error(r.props.flash.error)}})}).catch(()=>{m({type:"info",message:"Cancel"})})};I(()=>n.param.search,R(()=>{d()},500));const d=()=>{n.isLoading=!0,u.get("/admin/posts",n.param,{preserveScroll:!0,preserveState:!0,replace:!0,onFinish:()=>{n.isLoading=!1}})},g=()=>{u.get(route("admin.posts.index"))};return{...Q(n),handleDelete:y,onSizeChange:_,onCurrentChange:c,reset:g,changeStatus:C}}},Z={class:"p-4 container mx-auto overflow-x-auto"},$={class:"p-4 rounded shadow-sm border index-content"},ee={class:"flex items-center justify-between gap-4 xl:gap-0 mt-2 mb-5"},te={class:"flex items-center gap-3"},oe={"element-loading-text":"Loading..."},ae=["src","alt"],ne={class:"font-semibold"},se=["innerHTML"],re={class:"my-5 flex items-center justify-center"};function le(l,n,_,c,C,y){const d=a("Head"),g=a("Plus"),s=a("el-icon"),r=a("el-button"),w=a("Link"),L=a("el-input"),z=a("Refresh"),p=a("el-table-column"),k=a("el-tag"),D=a("el-switch"),V=a("Edit"),v=a("el-tooltip"),E=a("Delete"),T=a("el-table"),A=a("el-pagination"),B=a("AuthenticatedLayout"),P=W("loading");return b(),h(q,null,[e(d,{title:"Posts"}),e(B,null,{default:t(()=>[i("div",Z,[n[2]||(n[2]=i("h4",{class:"text-lg font-bold mb-3 ml-1"},"Posts",-1)),i("div",$,[i("div",ee,[i("div",te,[e(w,{href:l.route("admin.posts.create")},{default:t(()=>[e(r,{type:"primary"},{default:t(()=>[e(s,null,{default:t(()=>[e(g)]),_:1}),n[1]||(n[1]=i("span",null,"New",-1))]),_:1})]),_:1},8,["href"])]),i("div",null,[e(L,{modelValue:l.param.search,"onUpdate:modelValue":n[0]||(n[0]=o=>l.param.search=o),style:{width:"200px"},placeholder:"Search Posts"},null,8,["modelValue"]),e(r,{type:"danger",onClick:c.reset,class:"ml-3"},{default:t(()=>[e(s,null,{default:t(()=>[e(z)]),_:1})]),_:1},8,["onClick"])])]),J((b(),h("div",oe,[e(T,{data:_.posts.data,"table-layout":"auto","default-sort":{prop:"id",order:"descending"}},{default:t(()=>[e(p,{prop:"id",label:"ID",sortable:""}),e(p,{label:"Poster"},{default:t(o=>[o.row.poster?(b(),h("img",{key:0,src:o.row.poster,class:"h-8 w-10 object-cover rounded",alt:o.row.title},null,8,ae)):K("",!0)]),_:1}),e(p,{label:"Title",sortable:""},{default:t(o=>[i("h5",ne,S(o.row.title),1)]),_:1}),e(p,{label:"Category"},{default:t(o=>[e(k,{type:"primary"},{default:t(()=>[X(S(o.row.cate_name),1)]),_:2},1024)]),_:1}),e(p,{label:"Tags"},{default:t(o=>[i("h5",{class:"font-semibold",innerHTML:o.row.tags},null,8,se)]),_:1}),e(p,{prop:"created_at",label:"Created At",sortable:"",align:"center"}),e(p,{label:"Available",align:"center"},{default:t(o=>[e(D,{modelValue:o.row.is_published,"onUpdate:modelValue":f=>o.row.is_published=f,"active-value":0,"inactive-value":1,onChange:f=>c.changeStatus(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{label:"Actions"},{default:t(o=>[e(v,{class:"box-item",content:"Edit",placement:"top"},{default:t(()=>[e(w,{href:l.route("admin.posts.edit",o.row.id),class:"mr-3"},{default:t(()=>[e(r,{type:"warning",circle:"",style:{"margin-bottom":"5px"}},{default:t(()=>[e(s,null,{default:t(()=>[e(V)]),_:1})]),_:1})]),_:2},1032,["href"])]),_:2},1024),e(v,{class:"box-item",content:"Delete",placement:"top"},{default:t(()=>[e(r,{type:"danger",circle:"",style:{"margin-bottom":"5px"},onClick:f=>c.handleDelete(o.row.id)},{default:t(()=>[e(s,null,{default:t(()=>[e(E)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),i("div",re,[e(A,{onSizeChange:c.onSizeChange,onCurrentChange:c.onCurrentChange,"page-size":l.param.page_size,background:!0,"page-sizes":l.pageList,"current-page":l.param.page,layout:"total,sizes,prev,pager,next,jumper",total:_.posts.total},null,8,["onSizeChange","onCurrentChange","page-size","page-sizes","current-page","total"])])])),[[P,l.isLoading]])])])]),_:1})],64)}const Xe=O(Y,[["render",le]]);export{Xe as default};
