import{A as R}from"./AuthenticatedLayout-CTgtq4tI.js";import{r as S,e as C,ag as I,ai as a,c as y,U as t,M as i,T as L,o as f,a as l,O as k,V as F,a7 as D,H as j,R as P,L as q}from"./@vue-DjPJmJBm.js";import{_ as A}from"./InputError-DuIKKUKn.js";import{D as O}from"./@element-plus-DCRyTRz-.js";import{n as T,G as H}from"./@inertiajs-BHNbm3Fi.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as V}from"./element-plus-Cut5Ar7I.js";import"./darkmode-BEaTfPzm.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-D133QDgo.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const $={props:["categories","post"],components:{AuthenticatedLayout:R,InputError:A,Back:O},setup(e){const o=S(),r=C({isLoading:!1,imgSrc:e.post?e.post.poster:"",virtualForm:new FormData,form:{title:e.post.title??"",category:e.post.category_id??"",desc:e.post.desc??""},backurl:T().props.previous}),p=()=>{var m=document.getElementById("upload");m.click()},_=m=>{var u=m.target,n=u.files[0];r.imgSrc=URL.createObjectURL(n),r.virtualForm.append("poster",n);var d=document.getElementById("preview_img");d.src=URL.createObjectURL(n),d.onload=function(){URL.revokeObjectURL(d.src)}},v=m=>{m.validate(u=>{u&&(r.isLoading=!0,r.virtualForm.append("title",r.form.title),r.virtualForm.append("category",r.form.category),r.virtualForm.append("desc",r.form.desc),r.virtualForm.append("_method","patch"),H.post(route("admin.posts.update",e.post.id),r.virtualForm,{onSuccess:n=>{r.isLoading=!1,V.success(n.props.flash.success),m.resetFields()},onError:n=>{r.isLoading=!1,m.resetFields(),V.error(n.error)}}))})};return{...I(r),formRef:o,selectImage:p,loadFile:_,submitDialog:v}}},z={class:"p-4 container mx-auto overflow-x-auto"},G={class:"flex items-center"},M={class:"p-4 rounded shadow-sm"},J=["src"],K={class:"grid grid-cols-2 gap-4"},Q={class:"mb-5"};function W(e,o,r,p,_,v){const m=a("Head"),u=a("Back"),n=a("el-icon"),d=a("el-button"),w=a("Link"),c=a("InputError"),g=a("el-form-item"),b=a("el-input"),E=a("el-option"),U=a("el-select"),h=a("el-form"),B=a("AuthenticatedLayout");return f(),y(L,null,[t(m,{title:"Edit Posts"}),t(B,null,{default:i(()=>[l("div",z,[l("div",G,[t(w,{href:e.backurl},{default:i(()=>[t(d,{type:"info",plain:""},{default:i(()=>[t(n,null,{default:i(()=>[t(u)]),_:1})]),_:1})]),_:1},8,["href"]),o[6]||(o[6]=l("h4",{class:"text-lg font-bold ml-2"},"Edit Posts",-1))]),l("div",M,[t(h,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:i(()=>[t(g,{label:"Poster Photo",size:"large"},{default:i(()=>[l("div",{class:"upload-card h-60 w-full object-cover",onClick:o[1]||(o[1]=(...s)=>p.selectImage&&p.selectImage(...s))},[k(l("img",{id:"preview_img",class:"w-full h-auto object-cover",src:e.imgSrc},null,8,J),[[F,e.imgSrc]]),k(l("h4",null," Upload Poster (1200 x 630px) ",512),[[F,!e.imgSrc]]),l("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[0]||(o[0]=(...s)=>p.loadFile&&p.loadFile(...s)),accept:"image/*"},null,32)]),t(c,{class:"mt-2",message:e.$page.props.errors.image},null,8,["message"])]),_:1}),l("div",K,[t(g,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:i(()=>[t(b,{modelValue:e.form.title,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.title=s)},null,8,["modelValue"]),t(c,{class:"mt-2",message:e.$page.props.errors.name},null,8,["message"])]),_:1}),t(g,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:i(()=>[t(U,{modelValue:e.form.category,"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.category=s),placeholder:"Select",filterable:""},{default:i(()=>[(f(!0),y(L,null,D(r.categories,s=>(f(),q(E,{key:s.slug,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(c,{class:"mt-2",message:e.$page.props.errors.category},null,8,["message"])]),_:1})]),l("div",Q,[o[7]||(o[7]=l("p",{class:"mb-1.5"},"Description",-1)),t(b,{type:"textarea",rows:5,modelValue:e.form.desc,"onUpdate:modelValue":o[4]||(o[4]=s=>e.form.desc=s)},null,8,["modelValue"]),t(c,{class:"mt-2",message:e.$page.props.errors.desc},null,8,["message"])]),t(d,{type:"primary",onClick:o[5]||(o[5]=s=>p.submitDialog(p.formRef)),class:j({"opacity-25":e.isLoading}),disabled:e.isLoading},{default:i(()=>o[8]||(o[8]=[P(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const Oe=N($,[["render",W]]);export{Oe as default};
