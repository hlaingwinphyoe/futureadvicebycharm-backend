import{A as D}from"./AuthenticatedLayout-hpqXZqx5.js";import{r as q,e as M,ag as P,ai as s,c as b,V as r,O as a,U as _,o as f,a as i,P as S,W as w,a7 as U,I as h,S as j,M as C}from"./@vue-Sbvg1l4F.js";import{_ as A}from"./InputError-DvMyPukD.js";import{D as O}from"./@element-plus-CUvu2PoV.js";import{G as T}from"./@inertiajs-CbvId4g_.js";import{M as $}from"./MyEditor-Y3tzCs_B.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as E}from"./element-plus-DlSipXdM.js";import"./darkmode-D_2icXa1.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-DKV3VX6p.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./@tiptap-DWYullzs.js";import"./prosemirror-state-BhYcsFuq.js";import"./prosemirror-model-DLapjtUi.js";import"./orderedmap-C4TimWWB.js";import"./prosemirror-transform-DEGi2ToZ.js";import"./prosemirror-view-D3HAM3aT.js";import"./prosemirror-keymap-BFQpi39t.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-commands-COHbUQAb.js";import"./prosemirror-schema-list-Cm98daqU.js";import"./linkifyjs-DVrXeg1a.js";import"./prosemirror-dropcursor-Gs5WRMus.js";import"./prosemirror-gapcursor-BjeWOwQN.js";import"./prosemirror-history-sQZCUXNz.js";import"./rope-sequence-2KRK_2Nd.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-CCMSPfaE.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-CFmTUPeq.js";const z={props:["categories","tags"],components:{AuthenticatedLayout:D,InputError:A,Back:O,MyEditor:$},setup(o){const t=q(),e=M({isLoading:!1,imgSrc:"",virtualForm:new FormData,form:{title:"",slug:"",category:"",desc:"",tags:[]}}),p=()=>{var m=document.getElementById("upload");m.click()},y=m=>{var d=m.target,n=d.files[0];e.imgSrc=URL.createObjectURL(n),e.virtualForm.append("poster",n);var g=document.getElementById("preview_img");g.src=URL.createObjectURL(n),g.onload=function(){URL.revokeObjectURL(g.src)}},V=m=>{m.validate(d=>{d&&(e.isLoading=!0,e.virtualForm.append("title",e.form.title),e.virtualForm.append("slug",e.form.slug),e.virtualForm.append("category",e.form.category),e.virtualForm.append("desc",e.form.desc),e.virtualForm.append("tags",e.form.tags),T.post(route("admin.posts.store"),e.virtualForm,{onSuccess:n=>{E.success(n.props.flash.success),v(m)},onError:()=>{e.isLoading=!1,E.error(page.error)}}))})},v=m=>{m.resetFields(),e.form.title="",e.form.slug="",e.form.category="",e.form.desc="",e.form.tags=[],e.imgSrc="",e.virtualForm=new FormData,e.isLoading=!1};return{...P(e),formRef:t,selectImage:p,loadFile:y,submitDialog:V}}},G={class:"p-4 container mx-auto overflow-x-auto"},H={class:"flex items-center"},W={class:"p-4 rounded shadow-sm"},J=["src"],K={class:"grid grid-cols-2 gap-4"},Q={class:"mb-5"};function X(o,t,e,p,y,V){const v=s("Head"),m=s("Back"),d=s("el-icon"),n=s("el-button"),g=s("Link"),u=s("InputError"),c=s("el-form-item"),L=s("el-input"),F=s("el-option"),k=s("el-select"),B=s("MyEditor"),I=s("el-form"),R=s("AuthenticatedLayout");return f(),b(_,null,[r(v,{title:"Create Posts"}),r(R,null,{default:a(()=>[i("div",G,[i("div",H,[r(g,{href:o.route("admin.posts.index")},{default:a(()=>[r(n,{type:"info",plain:""},{default:a(()=>[r(d,null,{default:a(()=>[r(m)]),_:1})]),_:1})]),_:1},8,["href"]),t[8]||(t[8]=i("h4",{class:"text-lg font-bold ml-2"},"Create Posts",-1))]),i("div",W,[r(I,{"label-width":"120px",ref:"formRef",model:o.form,"label-position":"top"},{default:a(()=>[r(c,{label:"Poster Photo",size:"large"},{default:a(()=>[i("div",{class:"upload-card h-60 w-full object-cover",onClick:t[1]||(t[1]=(...l)=>p.selectImage&&p.selectImage(...l))},[S(i("img",{id:"preview_img",class:"w-full h-auto object-cover",src:o.imgSrc},null,8,J),[[w,o.imgSrc]]),S(i("h4",null," Upload Poster (1200 x 630px) ",512),[[w,!o.imgSrc]]),i("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:t[0]||(t[0]=(...l)=>p.loadFile&&p.loadFile(...l)),accept:"image/*"},null,32)]),r(u,{class:"mt-2",message:o.$page.props.errors.poster},null,8,["message"])]),_:1}),i("div",K,[r(c,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:a(()=>[r(L,{modelValue:o.form.title,"onUpdate:modelValue":t[2]||(t[2]=l=>o.form.title=l)},null,8,["modelValue"]),r(u,{class:"mt-2",message:o.$page.props.errors.title},null,8,["message"])]),_:1}),r(c,{label:"Slug",prop:"slug",rules:[{required:!0,message:"Slug is required",trigger:"blur"}]},{default:a(()=>[r(L,{modelValue:o.form.slug,"onUpdate:modelValue":t[3]||(t[3]=l=>o.form.slug=l)},null,8,["modelValue"]),r(u,{class:"mt-2",message:o.$page.props.errors.slug},null,8,["message"])]),_:1}),r(c,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:a(()=>[r(k,{modelValue:o.form.category,"onUpdate:modelValue":t[4]||(t[4]=l=>o.form.category=l),placeholder:"Select",filterable:""},{default:a(()=>[(f(!0),b(_,null,U(e.categories,l=>(f(),C(F,{key:l.slug,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(u,{class:"mt-2",message:o.$page.props.errors.category},null,8,["message"])]),_:1}),r(c,{label:"Tags"},{default:a(()=>[r(k,{modelValue:o.form.tags,"onUpdate:modelValue":t[5]||(t[5]=l=>o.form.tags=l),multiple:"",filterable:"","allow-create":"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,"default-first-option":"",placeholder:"Select or create tags"},{default:a(()=>[(f(!0),b(_,null,U(e.tags,l=>(f(),C(F,{key:l.id,label:l.name,value:l.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(u,{class:"mt-2",message:o.$page.props.errors.tags},null,8,["message"])]),_:1})]),i("div",Q,[t[9]||(t[9]=i("p",{class:"mb-1.5"},"Description",-1)),r(B,{modelValue:o.form.desc,"onUpdate:modelValue":t[6]||(t[6]=l=>o.form.desc=l)},null,8,["modelValue"]),r(u,{class:"mt-2",message:o.$page.props.errors.desc},null,8,["message"])]),r(n,{type:"primary",onClick:t[7]||(t[7]=l=>p.submitDialog(p.formRef)),class:h({"opacity-25":o.isLoading}),disabled:o.isLoading},{default:a(()=>t[10]||(t[10]=[j(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const oo=N(z,[["render",X]]);export{oo as default};
