import{e as U,r as C,ag as y,ai as m,L as R,M as s,o as V,a as u,U as r,R as w,H as E,c as h,a7 as I,T as B,O,V as P}from"./@vue-DjPJmJBm.js";import{_ as T}from"./InputError-DuIKKUKn.js";import{B as j,P as N}from"./@element-plus-7OHurGuN.js";import{G as _}from"./@inertiajs-BHNbm3Fi.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as v}from"./element-plus-LrVxQH71.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const z={props:["show","title","data","roles"],components:{InputError:T,Plus:j,Delete:N},emits:["closed"],setup(l,o){const e=U({dialogTitle:"",imgSrc:"",virtualForm:new FormData,form:{name:"",role:"",phone:"",email:"",social_link:""}}),t=C(),k=i=>{e.isLoading=!0,i.validate(g=>{g&&(e.virtualForm.append("name",e.form.name),e.virtualForm.append("role",e.form.role),e.virtualForm.append("phone",e.form.phone),e.virtualForm.append("email",e.form.email),e.virtualForm.append("social_link",e.form.social_link),e.dialogTitle==="Create"?_.post(route("admin.staffs.store"),e.virtualForm,{onSuccess:d=>{v.success(d.props.flash.success),n(i)},onError:()=>{e.isLoading=!1,v.error(page.error)}}):(e.virtualForm.append("_method","patch"),_.post(route("admin.staffs.update",l.data.id),e.virtualForm,{onSuccess:d=>{n(i),v.success(d.props.flash.success)},onError:()=>{e.isLoading=!1,v.error(page.error)}})))})},F=()=>{var i=document.getElementById("upload");i.click()},f=i=>{var g=i.target,d=g.files[0];e.imgSrc=URL.createObjectURL(d),e.virtualForm.append("image",d);var c=document.getElementById("preview_img");c.src=URL.createObjectURL(d),c.onload=function(){URL.revokeObjectURL(c.src)}},n=i=>{e.isLoading=!1,i.resetFields(),o.emit("closed")},p=()=>{e.dialogTitle=l.title,e.form.name=l.data.name??"",e.form.role=l.data.role_id??"",e.form.phone=l.data.phone??"",e.form.email=l.data.email??"",e.imgSrc=l.data.profile??""},b=i=>{_.delete(route("admin.staffs.destroy-media",i.id),{onSuccess:()=>{e.imgSrc=""}})};return{...y(e),openDialog:p,formRef:t,closeDialog:n,submitDialog:k,selectImage:F,loadFile:f,handleRemove:b}}},G={class:"relative group"},M=["src"],H={class:"dialog-footer"};function A(l,o,e,t,k,F){const f=m("el-input"),n=m("InputError"),p=m("el-form-item"),b=m("el-option"),i=m("el-select"),g=m("Delete"),d=m("el-icon"),c=m("Plus"),D=m("el-form"),L=m("el-button"),S=m("el-dialog");return V(),R(S,{modelValue:e.show,"onUpdate:modelValue":o[11]||(o[11]=a=>e.show=a),onClose:o[12]||(o[12]=a=>t.closeDialog(t.formRef)),onOpen:t.openDialog,draggable:"",title:l.dialogTitle,"close-on-click-modal":!1,width:"550"},{footer:s(()=>[u("div",H,[r(L,{onClick:o[9]||(o[9]=a=>t.closeDialog(t.formRef))},{default:s(()=>o[13]||(o[13]=[w("Cancel")])),_:1}),r(L,{type:"primary",onClick:o[10]||(o[10]=a=>t.submitDialog(t.formRef)),class:E({"opacity-25":l.isLoading}),disabled:l.isLoading},{default:s(()=>o[14]||(o[14]=[w(" Save ")])),_:1},8,["class","disabled"])])]),default:s(()=>[r(D,{"label-width":"120px",ref:"formRef",model:l.form},{default:s(()=>[r(p,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:s(()=>[r(f,{modelValue:l.form.name,"onUpdate:modelValue":o[0]||(o[0]=a=>l.form.name=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:l.$page.props.errors.name},null,8,["message"])]),_:1}),r(p,{label:"Role",rules:[{required:!0,message:"Role is required",trigger:"blur"}]},{default:s(()=>[r(i,{modelValue:l.form.role,"onUpdate:modelValue":o[1]||(o[1]=a=>l.form.role=a),placeholder:"Select",clearable:"",onClear:o[2]||(o[2]=a=>l.form.role="")},{default:s(()=>[(V(!0),h(B,null,I(e.roles,a=>(V(),R(b,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(n,{class:"mt-2",message:l.$page.props.errors.role},null,8,["message"])]),_:1}),r(p,{label:"Email",prop:"email"},{default:s(()=>[r(f,{type:"email",modelValue:l.form.email,"onUpdate:modelValue":o[3]||(o[3]=a=>l.form.email=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:l.$page.props.errors.email},null,8,["message"])]),_:1}),r(p,{label:"Phone",prop:"phone"},{default:s(()=>[r(f,{modelValue:l.form.phone,"onUpdate:modelValue":o[4]||(o[4]=a=>l.form.phone=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:l.$page.props.errors.phone},null,8,["message"])]),_:1}),r(p,{label:"Social Link",prop:"social"},{default:s(()=>[r(f,{modelValue:l.form.social,"onUpdate:modelValue":o[5]||(o[5]=a=>l.form.social=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:l.$page.props.errors.social},null,8,["message"])]),_:1}),r(p,{label:"Profile"},{default:s(()=>[u("div",G,[O(u("img",{id:"preview_img",class:"upload-card object-contain mr-2.5",src:l.imgSrc},null,8,M),[[P,l.imgSrc!=""]]),u("span",{class:"absolute-center hidden group-hover:flex group-hover:bg-black group-hover:bg-opacity-50 w-[148px] h-[148px] text-white items-center justify-center rounded-md",onClick:o[6]||(o[6]=a=>t.handleRemove(e.data))},[r(d,{size:"large",class:"cursor-pointer"},{default:s(()=>[r(g)]),_:1})])]),u("div",{class:"upload-card",onClick:o[8]||(o[8]=(...a)=>t.selectImage&&t.selectImage(...a))},[u("h4",null,[r(d,{size:"large"},{default:s(()=>[r(c)]),_:1})]),u("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[7]||(o[7]=(...a)=>t.loadFile&&t.loadFile(...a)),accept:"image/*"},null,32)]),r(n,{class:"mt-2",message:l.$page.props.errors.image},null,8,["message"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const ye=q(z,[["render",A]]);export{ye as default};
