import{A as h}from"./AuthenticatedLayout-hpqXZqx5.js";import{r as q,e as D,ag as M,ai as s,c as v,V as t,O as a,U as b,o as f,a as m,P as F,W as E,a7 as S,I as P,S as j,M as U}from"./@vue-Sbvg1l4F.js";import{_ as A}from"./InputError-DvMyPukD.js";import{D as O}from"./@element-plus-CUvu2PoV.js";import{n as T,G as $}from"./@inertiajs-CbvId4g_.js";import{M as N}from"./MyEditor-Y3tzCs_B.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as w}from"./element-plus-DlSipXdM.js";import"./darkmode-D_2icXa1.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-DKV3VX6p.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./@tiptap-DWYullzs.js";import"./prosemirror-state-BhYcsFuq.js";import"./prosemirror-model-DLapjtUi.js";import"./orderedmap-C4TimWWB.js";import"./prosemirror-transform-DEGi2ToZ.js";import"./prosemirror-view-D3HAM3aT.js";import"./prosemirror-keymap-BFQpi39t.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-commands-COHbUQAb.js";import"./prosemirror-schema-list-Cm98daqU.js";import"./linkifyjs-DVrXeg1a.js";import"./prosemirror-dropcursor-Gs5WRMus.js";import"./prosemirror-gapcursor-BjeWOwQN.js";import"./prosemirror-history-sQZCUXNz.js";import"./rope-sequence-2KRK_2Nd.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-CCMSPfaE.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-CFmTUPeq.js";const G={props:["categories","post","tags"],components:{AuthenticatedLayout:h,InputError:A,MyEditor:N,Back:O},setup(e){const o=q(),l=D({isLoading:!1,imgSrc:e.post?"/storage/"+e.post.poster:"",virtualForm:new FormData,form:{title:e.post.title??"",slug:e.post.slug??"",category:e.post.category_id??"",desc:e.post.desc??"",tags:e.post?e.post.tags.map(i=>i.slug):[]},backurl:T().props.previous}),n=()=>{var i=document.getElementById("upload");i.click()},_=i=>{var g=i.target,p=g.files[0];l.imgSrc=URL.createObjectURL(p),l.virtualForm.append("poster",p);var u=document.getElementById("preview_img");u.src=URL.createObjectURL(p),u.onload=function(){URL.revokeObjectURL(u.src)}},y=i=>{i.validate(g=>{g&&(l.isLoading=!0,l.virtualForm.append("title",l.form.title),l.virtualForm.append("slug",l.form.slug),l.virtualForm.append("category",l.form.category),l.virtualForm.append("tags",l.form.tags),l.virtualForm.append("desc",l.form.desc),l.virtualForm.append("_method","patch"),$.post(route("admin.posts.update",e.post.id),l.virtualForm,{onSuccess:p=>{l.isLoading=!1,w.success(p.props.flash.success),i.resetFields()},onError:p=>{l.isLoading=!1,i.resetFields(),w.error(p.error)}}))})};return{...M(l),formRef:o,selectImage:n,loadFile:_,submitDialog:y}}},H={class:"p-4 container mx-auto overflow-x-auto"},W={class:"flex items-center"},J={class:"p-4 rounded shadow-sm"},K=["src"],Q={class:"grid lg:grid-cols-3 gap-4"},X={class:"mb-5"};function Y(e,o,l,n,_,y){const i=s("Head"),g=s("Back"),p=s("el-icon"),u=s("el-button"),B=s("Link"),d=s("InputError"),c=s("el-form-item"),V=s("el-input"),L=s("el-option"),k=s("el-select"),I=s("MyEditor"),C=s("el-form"),R=s("AuthenticatedLayout");return f(),v(b,null,[t(i,{title:"Edit Posts"}),t(R,null,{default:a(()=>[m("div",H,[m("div",W,[t(B,{href:e.backurl},{default:a(()=>[t(u,{type:"info",plain:""},{default:a(()=>[t(p,null,{default:a(()=>[t(g)]),_:1})]),_:1})]),_:1},8,["href"]),o[8]||(o[8]=m("h4",{class:"text-lg font-bold ml-2"},"Edit Posts",-1))]),m("div",J,[t(C,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:a(()=>[t(c,{label:"Poster Photo",size:"large"},{default:a(()=>[m("div",{class:"upload-card h-60 w-full object-cover",onClick:o[1]||(o[1]=(...r)=>n.selectImage&&n.selectImage(...r))},[F(m("img",{id:"preview_img",class:"w-full h-auto object-cover",src:e.imgSrc},null,8,K),[[E,e.imgSrc]]),F(m("h4",null," Upload Poster (1200 x 630px) ",512),[[E,!e.imgSrc]]),m("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[0]||(o[0]=(...r)=>n.loadFile&&n.loadFile(...r)),accept:"image/*"},null,32)]),t(d,{class:"mt-2",message:e.$page.props.errors.poster},null,8,["message"])]),_:1}),m("div",Q,[t(c,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:a(()=>[t(V,{modelValue:e.form.title,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.title=r)},null,8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.name},null,8,["message"])]),_:1}),t(c,{label:"Slug",prop:"slug",rules:[{required:!0,message:"Slug is required",trigger:"blur"}]},{default:a(()=>[t(V,{modelValue:e.form.slug,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.slug=r)},null,8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.slug},null,8,["message"])]),_:1}),t(c,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:a(()=>[t(k,{modelValue:e.form.category,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.category=r),placeholder:"Select",filterable:""},{default:a(()=>[(f(!0),v(b,null,S(l.categories,r=>(f(),U(L,{key:r.slug,label:r.name,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.category},null,8,["message"])]),_:1}),t(c,{label:"Tags"},{default:a(()=>[t(k,{modelValue:e.form.tags,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.tags=r),multiple:"",filterable:"","allow-create":"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,"default-first-option":"",placeholder:"Select or create tags"},{default:a(()=>[(f(!0),v(b,null,S(l.tags,r=>(f(),U(L,{key:r.id,label:r.name,value:r.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.tags},null,8,["message"])]),_:1})]),m("div",X,[o[9]||(o[9]=m("p",{class:"mb-1.5"},"Description",-1)),t(I,{modelValue:e.form.desc,"onUpdate:modelValue":o[6]||(o[6]=r=>e.form.desc=r)},null,8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.desc},null,8,["message"])]),t(u,{type:"primary",onClick:o[7]||(o[7]=r=>n.submitDialog(n.formRef)),class:P({"opacity-25":e.isLoading}),disabled:e.isLoading},{default:a(()=>o[10]||(o[10]=[j(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const to=z(G,[["render",Y]]);export{to as default};
