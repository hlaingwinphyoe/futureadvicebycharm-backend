import{C as D}from"./@inertiajs-BHNbm3Fi.js";import{_ as I}from"./InputError-DuIKKUKn.js";import{_ as w}from"./PermissionsList.vue_vue_type_script_setup_true_lang-O_JKYoL3.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as C}from"./element-plus-LrVxQH71.js";import{e as O,r as T,ag as x,ai as n,L as h,M as a,o as g,a as y,U as l,R as V,H as A,c as L,a7 as N,T as R}from"./@vue-DjPJmJBm.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@element-plus-7OHurGuN.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const B={props:["show","title","data","permissions"],components:{InputError:I,PermissionsList:w},emits:["closed"],setup(p,o){const i=O({dialogTitle:"",checkAll:!1,isIndeterminate:!0}),e=T(),s=D({name:"",permis:[]}),k=r=>{r.validate(c=>{c&&(i.dialogTitle==="Create"?s.post(route("admin.roles.store"),{onSuccess:t=>{d(r),C.success(t.props.flash.success)}}):s.patch(route("admin.roles.update",p.data.id),{onSuccess:t=>{d(r),C.success(t.props.flash.success)}}))})},d=r=>{s.reset(),s.clearErrors(),r.resetFields(),o.emit("closed")},f=()=>{i.dialogTitle=p.title,s.name=p.data.name??"",s.permis=p.data.permissionIds?p.data.permissionIds:[]},u=([r,c])=>{c==!0?s.permis.push(...r):s.permis=s.permis.filter(t=>!r.includes(t))},_=([r,c])=>{c==!0?s.permis.includes(r)||s.permis.push(r):s.permis.includes(r)&&(console.log(r),s.permis=s.permis.filter(t=>t!=r))};return{...x(i),openDialog:f,formRef:e,closeDialog:d,submitDialog:k,form:s,checkedAll:u,checked:_}}},P={class:"dialog-footer"};function S(p,o,i,e,s,k){const d=n("el-input"),f=n("InputError"),u=n("el-form-item"),_=n("PermissionsList"),r=n("el-scrollbar"),c=n("el-form"),t=n("el-button"),v=n("el-dialog");return g(),h(v,{modelValue:i.show,"onUpdate:modelValue":o[3]||(o[3]=m=>i.show=m),onClose:o[4]||(o[4]=m=>e.closeDialog(e.formRef)),onOpen:e.openDialog,draggable:"",title:p.dialogTitle,"close-on-click-modal":!1,width:"800"},{footer:a(()=>[y("div",P,[l(t,{onClick:o[1]||(o[1]=m=>e.closeDialog(e.formRef))},{default:a(()=>o[5]||(o[5]=[V("Cancel")])),_:1}),l(t,{type:"primary",onClick:o[2]||(o[2]=m=>e.submitDialog(e.formRef)),class:A({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:a(()=>o[6]||(o[6]=[V(" Save ")])),_:1},8,["class","disabled"])])]),default:a(()=>[l(c,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:a(()=>[l(u,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:a(()=>[l(d,{modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=m=>e.form.name=m)},null,8,["modelValue"]),l(f,{class:"mt-2",message:e.form.errors.name},null,8,["message"])]),_:1}),l(u,{label:"Permissions"},{default:a(()=>[l(r,{height:"400"},{default:a(()=>[(g(!0),L(R,null,N(i.permissions,(m,b)=>(g(),h(_,{key:b,type:b,permis:m,selected:i.data.permissionIds,role:i.data,onOnCheckedAll:e.checkedAll,onOnChecked:e.checked},null,8,["type","permis","selected","role","onOnCheckedAll","onOnChecked"]))),128)),l(f,{class:"mt-2",message:e.form.errors.permis},null,8,["message"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const De=E(B,[["render",S]]);export{De as default};
