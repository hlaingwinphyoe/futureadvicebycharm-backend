import{A as B}from"./AuthenticatedLayout-CTgtq4tI.js";import{r as h,e as E,ag as I,ai as a,c as L,U as r,M as m,T as F,o as _,a as l,O as k,V as w,a7 as D,H as j,R as P,L as q}from"./@vue-DjPJmJBm.js";import{_ as A}from"./InputError-DuIKKUKn.js";import{D as O}from"./@element-plus-DCRyTRz-.js";import{G as T}from"./@inertiajs-BHNbm3Fi.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as V}from"./element-plus-Cut5Ar7I.js";import"./darkmode-BEaTfPzm.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-D133QDgo.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const N={props:["categories"],components:{AuthenticatedLayout:B,InputError:A,Back:O},setup(t){const e=h(),o=E({isLoading:!1,imgSrc:"",virtualForm:new FormData,form:{title:"",category:"",desc:""}}),n=()=>{var i=document.getElementById("upload");i.click()},v=i=>{var d=i.target,p=d.files[0];o.imgSrc=URL.createObjectURL(p),o.virtualForm.append("poster",p);var u=document.getElementById("preview_img");u.src=URL.createObjectURL(p),u.onload=function(){URL.revokeObjectURL(u.src)}},b=i=>{i.validate(d=>{d&&(o.isLoading=!0,o.virtualForm.append("title",o.form.title),o.virtualForm.append("category",o.form.category),o.virtualForm.append("desc",o.form.desc),T.post(route("admin.posts.store"),o.virtualForm,{onSuccess:p=>{V.success(p.props.flash.success),f(i)},onError:()=>{o.isLoading=!1,V.error(page.error)}}))})},f=i=>{i.resetFields(),o.form.title="",o.form.category="",o.form.desc="",o.imgSrc="",o.virtualForm=new FormData,o.isLoading=!1};return{...I(o),formRef:e,selectImage:n,loadFile:v,submitDialog:b}}},$={class:"p-4 container mx-auto overflow-x-auto"},z={class:"flex items-center"},G={class:"p-4 rounded shadow-sm"},M=["src"],J={class:"grid grid-cols-2 gap-4"},K={class:"mb-5"};function Q(t,e,o,n,v,b){const f=a("Head"),i=a("Back"),d=a("el-icon"),p=a("el-button"),u=a("Link"),c=a("InputError"),g=a("el-form-item"),y=a("el-input"),C=a("el-option"),U=a("el-select"),R=a("el-form"),S=a("AuthenticatedLayout");return _(),L(F,null,[r(f,{title:"Create Posts"}),r(S,null,{default:m(()=>[l("div",$,[l("div",z,[r(u,{href:t.route("admin.posts.index")},{default:m(()=>[r(p,{type:"info",plain:""},{default:m(()=>[r(d,null,{default:m(()=>[r(i)]),_:1})]),_:1})]),_:1},8,["href"]),e[6]||(e[6]=l("h4",{class:"text-lg font-bold ml-2"},"Create Posts",-1))]),l("div",G,[r(R,{"label-width":"120px",ref:"formRef",model:t.form,"label-position":"top"},{default:m(()=>[r(g,{label:"Poster Photo",size:"large"},{default:m(()=>[l("div",{class:"upload-card h-60 w-full object-cover",onClick:e[1]||(e[1]=(...s)=>n.selectImage&&n.selectImage(...s))},[k(l("img",{id:"preview_img",class:"w-full h-auto object-cover",src:t.imgSrc},null,8,M),[[w,t.imgSrc]]),k(l("h4",null," Upload Poster (1200 x 630px) ",512),[[w,!t.imgSrc]]),l("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:e[0]||(e[0]=(...s)=>n.loadFile&&n.loadFile(...s)),accept:"image/*"},null,32)]),r(c,{class:"mt-2",message:t.$page.props.errors.image},null,8,["message"])]),_:1}),l("div",J,[r(g,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:m(()=>[r(y,{modelValue:t.form.title,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.title=s)},null,8,["modelValue"]),r(c,{class:"mt-2",message:t.$page.props.errors.name},null,8,["message"])]),_:1}),r(g,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:m(()=>[r(U,{modelValue:t.form.category,"onUpdate:modelValue":e[3]||(e[3]=s=>t.form.category=s),placeholder:"Select",filterable:""},{default:m(()=>[(_(!0),L(F,null,D(o.categories,s=>(_(),q(C,{key:s.slug,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(c,{class:"mt-2",message:t.$page.props.errors.category},null,8,["message"])]),_:1})]),l("div",K,[e[7]||(e[7]=l("p",{class:"mb-1.5"},"Description",-1)),r(y,{type:"textarea",rows:5,modelValue:t.form.desc,"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.desc=s)},null,8,["modelValue"]),r(c,{class:"mt-2",message:t.$page.props.errors.desc},null,8,["message"])]),r(p,{type:"primary",onClick:e[5]||(e[5]=s=>n.submitDialog(n.formRef)),class:j({"opacity-25":t.isLoading}),disabled:t.isLoading},{default:m(()=>e[8]||(e[8]=[P(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const Ae=H(N,[["render",Q]]);export{Ae as default};
