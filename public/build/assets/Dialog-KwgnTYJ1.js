import{e as w,r as D,ag as S,ai as n,M as y,O as m,o as C,a as p,V as i,S as V,I as P,P as k,W as I}from"./@vue-Sbvg1l4F.js";import{_ as U}from"./InputError-DvMyPukD.js";import{B as E,P as R}from"./@element-plus-CUvu2PoV.js";import{G as b}from"./@inertiajs-CbvId4g_.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as v}from"./element-plus-DlSipXdM.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-CCMSPfaE.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-CFmTUPeq.js";const q={props:["show","title","data","currencies"],components:{InputError:U,Plus:E,Delete:R},emits:["closed"],setup(r,o){const e=w({dialogTitle:"",isLoading:!1,virtualForm:new FormData,imgSrc:"",form:{name:"",price:"",th_price:""}}),l=D(),F=t=>{e.isLoading=!0,t.validate(f=>{f&&(e.virtualForm.append("name",e.form.name),e.virtualForm.append("price",e.form.price),e.virtualForm.append("th_price",e.form.th_price),e.dialogTitle==="Create"?b.post(route("admin.items.store"),e.virtualForm,{onSuccess:s=>{e.isLoading=!1,v.success(s.props.flash.success),t.resetFields(),d(t)},onError:()=>{e.isLoading=!1,t.resetFields(),v.error(page.error)}}):(e.virtualForm.append("_method","patch"),b.post(route("admin.items.update",r.data.id),e.virtualForm,{onSuccess:s=>{e.isLoading=!1,v.success(s.props.flash.success),t.resetFields(),d(t)},onError:s=>{e.isLoading=!1,t.resetFields(),v.error(s.error)}})))})},h=()=>{var t=document.getElementById("upload");t.click()},g=t=>{var f=t.target,s=f.files[0];e.imgSrc=URL.createObjectURL(s),e.virtualForm.append("image",s);var c=document.getElementById("preview_img");c.src=URL.createObjectURL(s),c.onload=function(){URL.revokeObjectURL(c.src)}},d=t=>{t.resetFields(),o.emit("closed")},u=t=>{b.delete(route("admin.items.destroy-media",t.id),{onSuccess:()=>{e.imgSrc=""}})},_=()=>{e.dialogTitle=r.title,e.form.name=r.data.name??"",e.form.price=r.data.price??"",e.form.th_price=r.data.th_price??"",e.imgSrc=r.data.image??""};return{...S(e),openDialog:_,formRef:l,closeDialog:d,submitDialog:F,selectImage:h,loadFile:g,handleRemove:u}}},B={class:"relative group"},O=["src"],j={class:"dialog-footer"};function N(r,o,e,l,F,h){const g=n("el-input"),d=n("InputError"),u=n("el-form-item"),_=n("Delete"),t=n("el-icon"),f=n("Plus"),s=n("el-form"),c=n("el-button"),L=n("el-dialog");return C(),y(L,{modelValue:e.show,"onUpdate:modelValue":o[8]||(o[8]=a=>e.show=a),onClose:o[9]||(o[9]=a=>l.closeDialog(l.formRef)),onOpen:l.openDialog,draggable:"",title:r.dialogTitle,"close-on-click-modal":!1,width:"550"},{footer:m(()=>[p("div",j,[i(c,{onClick:o[6]||(o[6]=a=>l.closeDialog(l.formRef))},{default:m(()=>o[10]||(o[10]=[V("Cancel")])),_:1}),i(c,{type:"primary",onClick:o[7]||(o[7]=a=>l.submitDialog(l.formRef)),class:P({"opacity-25":r.isLoading}),disabled:r.isLoading},{default:m(()=>o[11]||(o[11]=[V(" Save ")])),_:1},8,["class","disabled"])])]),default:m(()=>[i(s,{"label-width":"120px",ref:"formRef",model:r.form},{default:m(()=>[i(u,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:m(()=>[i(g,{modelValue:r.form.name,"onUpdate:modelValue":o[0]||(o[0]=a=>r.form.name=a)},null,8,["modelValue"]),i(d,{class:"mt-2",message:r.$page.props.errors.name},null,8,["message"])]),_:1}),i(u,{label:"Price",prop:"price",rules:[{required:!0,message:"Price is required",trigger:"blur"}]},{default:m(()=>[i(g,{modelValue:r.form.price,"onUpdate:modelValue":o[1]||(o[1]=a=>r.form.price=a),type:"number",min:0,placeholder:"Please input"},null,8,["modelValue"]),i(d,{class:"mt-2",message:r.$page.props.errors.price},null,8,["message"])]),_:1}),i(u,{label:"Thai Price",prop:"th_price",rules:[{required:!0,message:"Thai Price is required",trigger:"blur"}]},{default:m(()=>[i(g,{modelValue:r.form.th_price,"onUpdate:modelValue":o[2]||(o[2]=a=>r.form.th_price=a),type:"number",min:0,placeholder:"Please input"},null,8,["modelValue"]),i(d,{class:"mt-2",message:r.$page.props.errors.th_price},null,8,["message"])]),_:1}),i(u,{label:"Image"},{default:m(()=>[p("div",B,[k(p("img",{id:"preview_img",class:"upload-card object-contain mr-2.5",src:r.imgSrc},null,8,O),[[I,r.imgSrc!=""]]),p("span",{class:"absolute-center hidden group-hover:flex group-hover:bg-black group-hover:bg-opacity-50 w-[148px] h-[148px] text-white items-center justify-center rounded-md",onClick:o[3]||(o[3]=a=>l.handleRemove(e.data))},[i(t,{size:"large",class:"cursor-pointer"},{default:m(()=>[i(_)]),_:1})])]),p("div",{class:"upload-card",onClick:o[5]||(o[5]=(...a)=>l.selectImage&&l.selectImage(...a))},[p("h4",null,[i(t,{size:"large"},{default:m(()=>[i(f)]),_:1})]),p("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[4]||(o[4]=(...a)=>l.loadFile&&l.loadFile(...a)),accept:"image/*"},null,32)]),i(d,{class:"mt-2",message:r.$page.props.errors.image},null,8,["message"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const De=T(q,[["render",N]]);export{De as default};
