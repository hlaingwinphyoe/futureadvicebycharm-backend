import{A as I}from"./AuthenticatedLayout-BwqdLtow.js";import{r as h,e as D,ag as j,ai as l,c as _,U as a,M as s,T as b,o as c,a as i,O as w,V as U,a7 as C,H as P,R as T,L as S}from"./@vue-DjPJmJBm.js";import{_ as q}from"./InputError-DuIKKUKn.js";import{D as A}from"./@element-plus-7OHurGuN.js";import{G as O}from"./@inertiajs-BHNbm3Fi.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as R}from"./element-plus-LrVxQH71.js";import"./darkmode-BEaTfPzm.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-D133QDgo.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const N={props:["categories","tags"],components:{AuthenticatedLayout:I,InputError:q,Back:A},setup(t){const o=h(),e=D({isLoading:!1,imgSrc:"",virtualForm:new FormData,form:{title:"",category:"",desc:"",tags:[]}}),n=()=>{var m=document.getElementById("upload");m.click()},y=m=>{var d=m.target,p=d.files[0];e.imgSrc=URL.createObjectURL(p),e.virtualForm.append("poster",p);var u=document.getElementById("preview_img");u.src=URL.createObjectURL(p),u.onload=function(){URL.revokeObjectURL(u.src)}},L=m=>{m.validate(d=>{d&&(e.isLoading=!0,e.virtualForm.append("title",e.form.title),e.virtualForm.append("category",e.form.category),e.virtualForm.append("desc",e.form.desc),e.virtualForm.append("tags",e.form.tags),O.post(route("admin.posts.store"),e.virtualForm,{onSuccess:p=>{R.success(p.props.flash.success),v(m)},onError:()=>{e.isLoading=!1,R.error(page.error)}}))})},v=m=>{m.resetFields(),e.form.title="",e.form.category="",e.form.desc="",e.form.tags=[],e.imgSrc="",e.virtualForm=new FormData,e.isLoading=!1};return{...j(e),formRef:o,selectImage:n,loadFile:y,submitDialog:L}}},z={class:"p-4 container mx-auto overflow-x-auto"},G={class:"flex items-center"},M={class:"p-4 rounded shadow-sm"},$=["src"],J={class:"grid grid-cols-3 gap-4"},K={class:"mb-5"};function Q(t,o,e,n,y,L){const v=l("Head"),m=l("Back"),d=l("el-icon"),p=l("el-button"),u=l("Link"),g=l("InputError"),f=l("el-form-item"),F=l("el-input"),V=l("el-option"),k=l("el-select"),B=l("el-form"),E=l("AuthenticatedLayout");return c(),_(b,null,[a(v,{title:"Create Posts"}),a(E,null,{default:s(()=>[i("div",z,[i("div",G,[a(u,{href:t.route("admin.posts.index")},{default:s(()=>[a(p,{type:"info",plain:""},{default:s(()=>[a(d,null,{default:s(()=>[a(m)]),_:1})]),_:1})]),_:1},8,["href"]),o[7]||(o[7]=i("h4",{class:"text-lg font-bold ml-2"},"Create Posts",-1))]),i("div",M,[a(B,{"label-width":"120px",ref:"formRef",model:t.form,"label-position":"top"},{default:s(()=>[a(f,{label:"Poster Photo",size:"large"},{default:s(()=>[i("div",{class:"upload-card h-60 w-full object-cover",onClick:o[1]||(o[1]=(...r)=>n.selectImage&&n.selectImage(...r))},[w(i("img",{id:"preview_img",class:"w-full h-auto object-cover",src:t.imgSrc},null,8,$),[[U,t.imgSrc]]),w(i("h4",null," Upload Poster (1200 x 630px) ",512),[[U,!t.imgSrc]]),i("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[0]||(o[0]=(...r)=>n.loadFile&&n.loadFile(...r)),accept:"image/*"},null,32)]),a(g,{class:"mt-2",message:t.$page.props.errors.poster},null,8,["message"])]),_:1}),i("div",J,[a(f,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:s(()=>[a(F,{modelValue:t.form.title,"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.title=r)},null,8,["modelValue"]),a(g,{class:"mt-2",message:t.$page.props.errors.name},null,8,["message"])]),_:1}),a(f,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:s(()=>[a(k,{modelValue:t.form.category,"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.category=r),placeholder:"Select",filterable:""},{default:s(()=>[(c(!0),_(b,null,C(e.categories,r=>(c(),S(V,{key:r.slug,label:r.name,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(g,{class:"mt-2",message:t.$page.props.errors.category},null,8,["message"])]),_:1}),a(f,{label:"Tags"},{default:s(()=>[a(k,{modelValue:t.form.tags,"onUpdate:modelValue":o[4]||(o[4]=r=>t.form.tags=r),multiple:"",filterable:"","allow-create":"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":5,"default-first-option":"",placeholder:"Select or create tags"},{default:s(()=>[(c(!0),_(b,null,C(e.tags,r=>(c(),S(V,{key:r.id,label:r.name,value:r.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),i("div",K,[o[8]||(o[8]=i("p",{class:"mb-1.5"},"Description",-1)),a(F,{type:"textarea",rows:5,modelValue:t.form.desc,"onUpdate:modelValue":o[5]||(o[5]=r=>t.form.desc=r)},null,8,["modelValue"]),a(g,{class:"mt-2",message:t.$page.props.errors.desc},null,8,["message"])]),a(p,{type:"primary",onClick:o[6]||(o[6]=r=>n.submitDialog(n.formRef)),class:P({"opacity-25":t.isLoading}),disabled:t.isLoading},{default:s(()=>o[9]||(o[9]=[T(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const qe=H(N,[["render",Q]]);export{qe as default};
