import{A as I}from"./AuthenticatedLayout-BwqdLtow.js";import{r as h,e as q,ag as D,ai as a,c as b,U as t,M as s,T as _,o as f,a as m,O as F,V as w,a7 as U,H as j,R as P,L as S}from"./@vue-DjPJmJBm.js";import{_ as T}from"./InputError-DuIKKUKn.js";import{D as A}from"./@element-plus-7OHurGuN.js";import{n as O,G as $}from"./@inertiajs-BHNbm3Fi.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as E}from"./element-plus-LrVxQH71.js";import"./darkmode-BEaTfPzm.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-D133QDgo.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const N={props:["categories","post","tags"],components:{AuthenticatedLayout:I,InputError:T,Back:A},setup(e){const o=h(),r=q({isLoading:!1,imgSrc:e.post?"/storage/"+e.post.poster:"",virtualForm:new FormData,form:{title:e.post.title??"",slug:e.post.slug??"",category:e.post.category_id??"",desc:e.post.desc??"",tags:e.post?e.post.tags.map(i=>i.slug):[]},backurl:O().props.previous}),p=()=>{var i=document.getElementById("upload");i.click()},y=i=>{var g=i.target,n=g.files[0];r.imgSrc=URL.createObjectURL(n),r.virtualForm.append("poster",n);var u=document.getElementById("preview_img");u.src=URL.createObjectURL(n),u.onload=function(){URL.revokeObjectURL(u.src)}},L=i=>{i.validate(g=>{g&&(r.isLoading=!0,r.virtualForm.append("title",r.form.title),r.virtualForm.append("slug",r.form.slug),r.virtualForm.append("category",r.form.category),r.virtualForm.append("tags",r.form.tags),r.virtualForm.append("desc",r.form.desc),r.virtualForm.append("_method","patch"),$.post(route("admin.posts.update",e.post.id),r.virtualForm,{onSuccess:n=>{r.isLoading=!1,E.success(n.props.flash.success),i.resetFields()},onError:n=>{r.isLoading=!1,i.resetFields(),E.error(n.error)}}))})};return{...D(r),formRef:o,selectImage:p,loadFile:y,submitDialog:L}}},z={class:"p-4 container mx-auto overflow-x-auto"},G={class:"flex items-center"},M={class:"p-4 rounded shadow-sm"},J=["src"],K={class:"grid lg:grid-cols-3 gap-4"},Q={class:"mb-5"};function W(e,o,r,p,y,L){const i=a("Head"),g=a("Back"),n=a("el-icon"),u=a("el-button"),B=a("Link"),d=a("InputError"),c=a("el-form-item"),v=a("el-input"),V=a("el-option"),k=a("el-select"),R=a("el-form"),C=a("AuthenticatedLayout");return f(),b(_,null,[t(i,{title:"Edit Posts"}),t(C,null,{default:s(()=>[m("div",z,[m("div",G,[t(B,{href:e.backurl},{default:s(()=>[t(u,{type:"info",plain:""},{default:s(()=>[t(n,null,{default:s(()=>[t(g)]),_:1})]),_:1})]),_:1},8,["href"]),o[8]||(o[8]=m("h4",{class:"text-lg font-bold ml-2"},"Edit Posts",-1))]),m("div",M,[t(R,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:s(()=>[t(c,{label:"Poster Photo",size:"large"},{default:s(()=>[m("div",{class:"upload-card h-60 w-full object-cover",onClick:o[1]||(o[1]=(...l)=>p.selectImage&&p.selectImage(...l))},[F(m("img",{id:"preview_img",class:"w-full h-auto object-cover",src:e.imgSrc},null,8,J),[[w,e.imgSrc]]),F(m("h4",null," Upload Poster (1200 x 630px) ",512),[[w,!e.imgSrc]]),m("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[0]||(o[0]=(...l)=>p.loadFile&&p.loadFile(...l)),accept:"image/*"},null,32)]),t(d,{class:"mt-2",message:e.$page.props.errors.poster},null,8,["message"])]),_:1}),m("div",K,[t(c,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:s(()=>[t(v,{modelValue:e.form.title,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.title=l)},null,8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.name},null,8,["message"])]),_:1}),t(c,{label:"Slug",prop:"slug",rules:[{required:!0,message:"Slug is required",trigger:"blur"}]},{default:s(()=>[t(v,{modelValue:e.form.slug,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.slug=l)},null,8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.slug},null,8,["message"])]),_:1}),t(c,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:s(()=>[t(k,{modelValue:e.form.category,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.category=l),placeholder:"Select",filterable:""},{default:s(()=>[(f(!0),b(_,null,U(r.categories,l=>(f(),S(V,{key:l.slug,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.category},null,8,["message"])]),_:1}),t(c,{label:"Tags"},{default:s(()=>[t(k,{modelValue:e.form.tags,"onUpdate:modelValue":o[5]||(o[5]=l=>e.form.tags=l),multiple:"",filterable:"","allow-create":"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,"default-first-option":"",placeholder:"Select or create tags"},{default:s(()=>[(f(!0),b(_,null,U(r.tags,l=>(f(),S(V,{key:l.id,label:l.name,value:l.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.tags},null,8,["message"])]),_:1})]),m("div",Q,[o[9]||(o[9]=m("p",{class:"mb-1.5"},"Description",-1)),t(v,{type:"textarea",rows:5,modelValue:e.form.desc,"onUpdate:modelValue":o[6]||(o[6]=l=>e.form.desc=l)},null,8,["modelValue"]),t(d,{class:"mt-2",message:e.$page.props.errors.desc},null,8,["message"])]),t(u,{type:"primary",onClick:o[7]||(o[7]=l=>p.submitDialog(p.formRef)),class:j({"opacity-25":e.isLoading}),disabled:e.isLoading},{default:s(()=>o[10]||(o[10]=[P(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const Ae=H(N,[["render",W]]);export{Ae as default};
