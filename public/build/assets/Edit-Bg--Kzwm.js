import{A as C}from"./AuthenticatedLayout-BnOYfUtd.js";import{r as I,e as D,ag as j,ai as a,c as v,U as l,M as s,T as _,o as c,a as m,O as F,V as w,a7 as U,H as P,R as T,L as E}from"./@vue-DjPJmJBm.js";import{_ as q}from"./InputError-DuIKKUKn.js";import{D as A}from"./@element-plus-7OHurGuN.js";import{n as O,G as H}from"./@inertiajs-BHNbm3Fi.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as S}from"./element-plus-LrVxQH71.js";import"./darkmode-BEaTfPzm.js";import"./moment-C5S46NFB.js";import"./ApplicationLogo-D133QDgo.js";import"./deepmerge-DOl302Ur.js";import"./call-bind-apply-helpers-D2lLUVvI.js";import"./function-bind-CHqF18-c.js";import"./es-errors-BzoIU2Qy.js";import"./qs-DKXisfPe.js";import"./side-channel-Ct4gtEXZ.js";import"./object-inspect-DQgcxug-.js";import"./side-channel-list-Bu_TS6Fk.js";import"./side-channel-map-AEBR1zj1.js";import"./get-intrinsic-Bxi7wI-n.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-L1VercBF.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-DDrUrENM.js";import"./dunder-proto-CAfao6an.js";import"./hasown-DwiY0sux.js";import"./call-bound-DguFMLXM.js";import"./side-channel-weakmap-8WVUVGFG.js";import"./axios-upsvKRUO.js";import"./lodash.clonedeep-jBCF3Pnn.js";import"./lodash.isequal-v2OLR2rF.js";import"./lodash-es-CFXHhIzv.js";import"./@vueuse-DfGEukKn.js";import"./@popperjs-C8Ek51sF.js";import"./@ctrl-CBTFr1m8.js";import"./dayjs--ryK7Xvq.js";import"./async-validator-P8scd9xB.js";import"./memoize-one-DxrTgWdQ.js";import"./normalize-wheel-es-Cg1Do7zv.js";import"./@floating-ui-DHxWKL-w.js";const z={props:["categories","post","tags"],components:{AuthenticatedLayout:C,InputError:q,Back:A},setup(e){const o=I(),r=D({isLoading:!1,imgSrc:e.post?e.post.poster:"",virtualForm:new FormData,form:{title:e.post.title??"",category:e.post.category_id??"",desc:e.post.desc??"",tags:e.post?e.post.tags.map(i=>i.slug):[]},backurl:O().props.previous}),p=()=>{var i=document.getElementById("upload");i.click()},b=i=>{var u=i.target,n=u.files[0];r.imgSrc=URL.createObjectURL(n),r.virtualForm.append("poster",n);var d=document.getElementById("preview_img");d.src=URL.createObjectURL(n),d.onload=function(){URL.revokeObjectURL(d.src)}},y=i=>{i.validate(u=>{u&&(r.isLoading=!0,r.virtualForm.append("title",r.form.title),r.virtualForm.append("category",r.form.category),r.virtualForm.append("tags",r.form.tags),r.virtualForm.append("desc",r.form.desc),r.virtualForm.append("_method","patch"),H.post(route("admin.posts.update",e.post.id),r.virtualForm,{onSuccess:n=>{r.isLoading=!1,S.success(n.props.flash.success),i.resetFields()},onError:n=>{r.isLoading=!1,i.resetFields(),S.error(n.error)}}))})};return{...j(r),formRef:o,selectImage:p,loadFile:b,submitDialog:y}}},G={class:"p-4 container mx-auto overflow-x-auto"},M={class:"flex items-center"},$={class:"p-4 rounded shadow-sm"},J=["src"],K={class:"grid lg:grid-cols-3 gap-4"},Q={class:"mb-5"};function W(e,o,r,p,b,y){const i=a("Head"),u=a("Back"),n=a("el-icon"),d=a("el-button"),h=a("Link"),g=a("InputError"),f=a("el-form-item"),L=a("el-input"),k=a("el-option"),V=a("el-select"),B=a("el-form"),R=a("AuthenticatedLayout");return c(),v(_,null,[l(i,{title:"Edit Posts"}),l(R,null,{default:s(()=>[m("div",G,[m("div",M,[l(h,{href:e.backurl},{default:s(()=>[l(d,{type:"info",plain:""},{default:s(()=>[l(n,null,{default:s(()=>[l(u)]),_:1})]),_:1})]),_:1},8,["href"]),o[7]||(o[7]=m("h4",{class:"text-lg font-bold ml-2"},"Edit Posts",-1))]),m("div",$,[l(B,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:s(()=>[l(f,{label:"Poster Photo",size:"large"},{default:s(()=>[m("div",{class:"upload-card h-60 w-full object-cover",onClick:o[1]||(o[1]=(...t)=>p.selectImage&&p.selectImage(...t))},[F(m("img",{id:"preview_img",class:"w-full h-auto object-cover",src:e.imgSrc},null,8,J),[[w,e.imgSrc]]),F(m("h4",null," Upload Poster (1200 x 630px) ",512),[[w,!e.imgSrc]]),m("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[0]||(o[0]=(...t)=>p.loadFile&&p.loadFile(...t)),accept:"image/*"},null,32)]),l(g,{class:"mt-2",message:e.$page.props.errors.image},null,8,["message"])]),_:1}),m("div",K,[l(f,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:s(()=>[l(L,{modelValue:e.form.title,"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.title=t)},null,8,["modelValue"]),l(g,{class:"mt-2",message:e.$page.props.errors.name},null,8,["message"])]),_:1}),l(f,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:s(()=>[l(V,{modelValue:e.form.category,"onUpdate:modelValue":o[3]||(o[3]=t=>e.form.category=t),placeholder:"Select",filterable:""},{default:s(()=>[(c(!0),v(_,null,U(r.categories,t=>(c(),E(k,{key:t.slug,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(g,{class:"mt-2",message:e.$page.props.errors.category},null,8,["message"])]),_:1}),l(f,{label:"Tags"},{default:s(()=>[l(V,{modelValue:e.form.tags,"onUpdate:modelValue":o[4]||(o[4]=t=>e.form.tags=t),multiple:"",filterable:"","allow-create":"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":5,"default-first-option":"",placeholder:"Select or create tags"},{default:s(()=>[(c(!0),v(_,null,U(r.tags,t=>(c(),E(k,{key:t.id,label:t.name,value:t.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),m("div",Q,[o[8]||(o[8]=m("p",{class:"mb-1.5"},"Description",-1)),l(L,{type:"textarea",rows:5,modelValue:e.form.desc,"onUpdate:modelValue":o[5]||(o[5]=t=>e.form.desc=t)},null,8,["modelValue"]),l(g,{class:"mt-2",message:e.$page.props.errors.desc},null,8,["message"])]),l(d,{type:"primary",onClick:o[6]||(o[6]=t=>p.submitDialog(p.formRef)),class:P({"opacity-25":e.isLoading}),disabled:e.isLoading},{default:s(()=>o[9]||(o[9]=[T(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["model"])])])]),_:1})],64)}const Ae=N(z,[["render",W]]);export{Ae as default};
